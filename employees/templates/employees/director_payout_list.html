{% extends 'base.html' %}

{% block content %}
<div class="max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500">
    
    <div class="flex flex-col md:flex-row md:items-end justify-between gap-6 bg-slate-950 p-10 rounded-[3rem] text-white shadow-2xl relative overflow-hidden">
        <div class="relative z-10">
            <h2 class="text-3xl font-black tracking-tighter uppercase">Personnel <span class="text-blue-500">Payouts</span></h2>
            <p class="text-slate-400 text-sm font-medium italic">Authorized view for wage disbursements via M-Pesa.</p>
        </div>
        
        <div class="relative z-10 bg-white/10 backdrop-blur-md p-5 rounded-2xl border border-white/10">
            <p class="text-[10px] font-black text-blue-400 uppercase tracking-widest mb-1">System Date</p>
            <p class="text-xl font-black">{{ today|date:"d M Y" }}</p>
        </div>
    </div>

    <div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-xl overflow-hidden">
        <table class="w-full text-left">
            <thead>
                <tr class="bg-slate-50/80 border-b border-slate-100">
                    <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]">Employee</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]">ID Number</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]">M-Pesa / Phone</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]">Balance Due</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] text-right">Action</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-50">
                {% for employee in employees %}
                <tr class="hover:bg-slate-50/50 transition-all">
                    <td class="px-8 py-6">
                        <p class="text-sm font-black text-slate-800">{{ employee.name }}</p>
                        <p class="text-[10px] text-blue-600 font-bold uppercase">Daily: KES {{ employee.salary_per_day }}</p>
                    </td>
                    <td class="px-8 py-6 text-sm font-mono font-bold text-slate-600">
                        {{ employee.id_number|default:"---" }}
                    </td>
                    <td class="px-8 py-6">
                        <div class="flex items-center text-emerald-600 font-mono font-bold text-sm">
                            <i class="fa-solid fa-phone-flip mr-2 text-[10px]"></i>
                            {{ employee.phone }}
                        </div>
                    </td>
                    <td class="px-8 py-6">
                        <p class="text-sm font-black text-slate-900">KES {{ employee.payroll_account.balance_due|default:"0.00" }}</p>
                        <p class="text-[9px] text-slate-400 font-bold uppercase">Earned: {{ employee.payroll_account.total_earned }}</p>
                    </td>
                    <td class="px-8 py-6 text-right">
                        {% if employee.payroll_account.balance_due > 0 %}
                        <button class="bg-emerald-600 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-emerald-100 flex items-center ml-auto">
                            <i class="fa-solid fa-money-bill-transfer mr-2"></i> Pay Now
                        </button>
                        {% else %}
                        <span class="text-[9px] font-black text-slate-300 uppercase italic">Cleared</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}